# Copyright(2000): Dutch Forth Workshop Foundation, by GNU Public License
# $Id$
Test report of generic figforth for Intel 86 family.
Summary
This is a test report for 12 out of a zillion Forths that can be
generated from fig86.gnr
This is not a professional regression test.
I know that. Please be forgiving.

However, please tell me if any of the following tests fails
you, where it doesn't fail me.
It looks as if sometimes K' fails. But not for a freshly booted system.
If you have observation with regard to this, or even insight, or even
a fix, I urge you to inform me.

Environment ... 2.147
GNU/Linux 2.0.34 Redhat 5.1 (Pentium 90) development&test
GNU/Linux 1.2.13 Slackware (test of lina)
MSDOS 3.3            (Pentium III "Coppermine")
MASM 1.0 Copyright IBM 1981  (!)
nasm 0.98

Environment  2.147 ....
GNU/Linux 2.2.14 Redhat 6.1 (Pentium 90) development&test
MSDOS 3.3            (Pentium III "Coppermine")
MASM 1.0 Copyright IBM 1981  (!)
nasm 0.98
In this environment the figforth (linux with c input)
crashes immediately. Even if an older version RELEASE4
is built.

The following "tests" are defined:
A Booting
B make it
C 8 LIST 8 LOAD
D (requires A) 25 LOAD 0 PAUSE ! 100 SIEVE
  primes ending in 99971 99989 99991
E (requires A) KRAAK QUIT
F (r. A ) 89 LOAD (does nothing for 16 bit)
G (r. A) Editing a screen
H wc *.asm
J Binary equivalent than compiled on linux
K BYE
L Dos Directory correct
M  Documentation complete
N "ls -l" SYSTEM or "dir" SYSTEM
O Built in regression test
P Johns Hopkins university test (always with restrictions)

Pass criteria
A booted OK
B I made it through make (version can be built).
C plausible content of 8, everything loads fine, ends in copyright screen
D primes less then 100000 zip accross the screen
E plausable decompilation of QUIT
F timing of Byte benchmarks, must be 7 ms for a 500 Mhz Coppermine
G Effect of cursor (^E ..) word (^A ^F ^T) (un)delete (^Y ^U)
H Same as /bin/wc
J Binaries are equal or
J' disassembly reveals only gratuitous MASM deviations.
K successful return to operating system (linux) or
K' successful return to "operating system" (msdos)
L Dos Directory correct on generated floppy.
M .html .tex and .info file generated correctly
O No difference with built in test output wanted
P Output of test has only the expected restrictions

Test are always mentionned if applicable. A failed test is preceeded
by -. Not all tests are always down.

The following environments are defined (Only for BOOTFD BOOTHD):
I Booted from FD or HD
II Started from MSDOS
(Other environments following from the executable itself).
Notes about ommitted data:
- all linux versions use NASM  PROTECTED BITS32
- all booting versions use NASM BIOS
- the MASM versions all are MSDOS-hosted and real mode

This table can be used to decide whether you want to run
an older better tested version. Data for older versions
is not present if the new version passed all tests the older
one does.

Description                 Latest Configuration   Executable     Tests
                            test       file         name
hosted_linux linux_native   135  lina.cfg         lina          BCDEFHKMOP
hosted_linux linux_c native 135  linux.cfg        (ciforthc)    B-C-D-E-F-H-K M

bootfd real                 N.A.       alone1.cfg      forth.com  Not even built

                                                                  Not even built
bootfd prot16               N.A.       alone.cfg       forth.com  Not even built

hostedmsdos modern          N.A.   msdos.cfg       msdos.com      Not even built
bootfd prot32               N.A.   alone3.cfg      forth.com      Not even built

boothd prot32               N.A.   alonehd.cfg     no filesystem  Not even built
hostedmsdos MASM bios       N.A.   msdos1.cfg      msdos.com      Not even built
hostedmsdos MASM modern     N.A.   msdos2.cfg      msdos.com      Not even built
hostedmsdos MASM classic    N.A.   msdos3.cfg      msdos.com      Not even built
hostedmsdos MASM modern 32  N.A.   msdos9.cfg      forth.com      Not even built


It may seem strange that the versions are lower that those for
figforth below. However this is in fact 3.### where fig is 2.###.

N.A. : not applicable.
L* :

APPENDIX

The test for the latest version that conformed to the fig
standard.

This table can be used to decide whether you want to run
an older better tested version. Data for older versions
is not present if the new version passed all tests the older
one does.

Description                 Latest Configuration   Executable     Tests
                            test       file         name
hosted_linux linux_native   147    lina.cfg         (lina)        BCDEFHKM
hosted_linux linux_c native        linux.cfg        (figforth)    BCDEFHK
                            147                                   B-C-D-E-F-H-K M
bootfd real                 102    alone1.cfg      forth.com      B I  ACDEG
                                                                    II  CDEG K'L
                            147                                   BM
bootfd prot16               147    alone.cfg       forth.com      BM I  ACDEG
                                                                     II  CDEG K'L
hostedmsdos modern          147    msdos.cfg       msdos.com       BM II  CDEG K' L
bootfd prot32               116    alone3.cfg      forth.com      B I  ACDEG   L
                            116                                     II  CDE-G K' L
boothd prot32               148    alonehd.cfg     no filesystem  B I  ACDEFG
hostedmsdos MASM bios       102    msdos1.cfg      msdos.com      B II  CDEG K' L
hostedmsdos MASM modern     102    msdos2.cfg      msdos.com      B II  CDEG K' L
hostedmsdos MASM classic    102    msdos3.cfg      msdos.com      B II  CDEG K' L*
hostedmsdos MASM modern 32   112   msdos9.cfg      forth.com      B II  CDEF-G -K'

Version 2.114 apparently in alone3 cannot handle screen deleting lines, otherwise
reasonable.
Version 2.147 has the same assembly source file than 2.148 whereever it has
been tested. (Modification was needed for alonehd.cfg.
Afterwards 2.148 has been checked in and it was
checked that the source was equivalent to the one tested. (i.e. after
removing comment lines the source was the same, or differed at most
with respect to strings printed.)
All MASM version generate real code. I have to boot into MSDOS to test this
so these are really old version.

N.A. : not applicable.
L* :
The classic version has been tested after properly setting OFFSET to
compensate for the fact that the BLOCKS.BLK was not simple dumped on
the floppy from sector 0. In that case the MSDOS directory would not
have remained intact.

The linux with c version crashes immediately. This has little to do with
the quality of the Forth, but more with linking problems on Redhat 6.2.
